{{define "quote"}}
    {{template "header"}}

    {{if .Error}}
        <div class="alert alert-danger" style="padding-top: 0">
            <h2>An error occurred!</h2>
            <p>{{.Error}}</p>
        </div>
    {{else}}
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/channel/{{.Channel | urlquery}}">{{.Channel}}</a></li>
            <li class="breadcrumb-item active">{{.ID}}</li>
        </ol><!--/ .breadcrumb -->

        <form method="POST" action="/quote/edit/{{.ID | urlquery}}">
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th colspan="3">
                            {{.Channel}} on {{.Date.Format "2006-01-02"}} at {{.Date.Format "15:04:05"}}
                        </th>
                    </tr>
                    <tr>
                        <th style="width: 20%">Author</th>
                        <th style="width: 75%">Message</th>
                        <th style="width: 5%">&nbsp;</th>
                    </tr>
                </thead>
                <tbody>
                    {{range $key, $value := .Lines}}
                        <tr
                            {{if $value.Deleted}}
                                style="color: #ccc; display: none"
                                class="deleted"
                            {{end}}
                        >
                            <td>{{$value.Author}}</td>
                            <td>{{$value.Content}}</td>
                            <td style="text-align: center"><!-- TODO -->
                                <input
                                    type="checkbox"
                                    name="delete[]"
                                    value="{{$value.ID}}"
                                >
                            </td>
                        </tr>
                    {{end}}
                </tbody>
                <tfoot>
                    <tr>
                        <td>
                            <label for="show_deleted">
                                <input
                                    type="checkbox"
                                    name="show_deleted"
                                    id="show_deleted"
                                >

                                Show deleted lines
                            </label>
                        </td>
                        <td>&nbsp;</td>
                        <td>
                            <button
                                type="submit"
                                class="btn btn-danger"
                                title="Delete or undelete selected lines"
                            >
                                <i class="glyphicon glyphicon-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tfoot>
            </table><!--/ .table .table-sm -->
        </form>
    {{end}}

    {{template "footer"}}
{{end}}

{{define "javascript"}}
<script type="text/javascript">
    (function() {
        $('#show_deleted').on('change', function() {
            if ($(this).is(':checked'))
                $('.deleted').show();
            else
                $('.deleted').hide();
        });
    })();
</script>
{{end}}

